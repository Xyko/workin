#!/usr/bin/env ruby
# coding: utf-8
require 'workin'
# require 'tools'
# require 'thor'

Signal.trap("INT") { 
  puts "\n\tNote: You will typically use Signal.trap instead.\n".light_red
  exit
}

Signal.trap("TERM") {
  puts "\n\tNote: You will typically use Signal.trap instead.\n".light_red
  exit
}

load Workin.files + '/requireds.rb'

class Workin_exec < Thor

  desc 'info', 'Show working gem info.'
  def info(command='')
    puts "Gem_path.:  #{Workin.gem_path}"
    puts "Ldap_pass.: #{Workin.ldap_pass}"
    puts "Ldap_user.: #{Workin.ldap_user}"
    puts "User.:      #{Workin.user}"
    puts "Pwd.:       #{Workin.pwd}"
    puts "Host.:      #{Workin.host}"
    puts "Files:      #{Workin.files}"
    ToolsDisplay.show "TEXT SAMELINE sem cor ", :sameline
    ToolsDisplay.show "TEXT GREEN", :green
    ToolsDisplay.show "TEXT YELLOW", :yellow
  end

  desc 'setdir', 'Set a new source directory.'
  long_desc <<-LONGDESC
    `working setdir` will register directories base to will scanend.
    > $ working setdir /opt/my_projects . ../
  LONGDESC
  def setdir(*dirs)
    ap dirs
    ap 'setdir'
  end

  def method_missing(method, *args, &block)
    
    ap method

    exit()
  end

end

begin
  Workin_exec.start(ARGV)
rescue SystemExit => e
  puts "\tExiting workin gem... See you later...".light_green
  exit(e.status)
rescue Exception => e
  puts e
end